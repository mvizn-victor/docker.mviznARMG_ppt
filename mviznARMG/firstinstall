##opt
sudo update-initramfs -u
#restart
sudo chmod 777 /opt

##enable vnc
#settings > sharing screen sharing > enable
gsettings set org.gnome.Vino require-encryption false
sudo apt install -y expect ntp openssh-server curl
echo "deb [arch=amd64] http://storage.googleapis.com/tensorflow-serving-apt stable tensorflow-model-server tensorflow-model-server-universal" | sudo tee /etc/apt/sources.list.d/tensorflow-serving.list && \
curl https://storage.googleapis.com/tensorflow-serving-apt/tensorflow-serving.release.pub.gpg | sudo apt-key add -
sudo apt-get update -y && sudo apt-get install -y tensorflow-model-server

##docker
sudo apt-get install -y \
    apt-transport-https \
    ca-certificates \
    curl \
    gnupg-agent \
    software-properties-common
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
sudo add-apt-repository \
   "deb [arch=amd64] https://download.docker.com/linux/ubuntu \
   $(lsb_release -cs) \
   stable"
sudo apt update -y
#sudo apt-get install -y --allow-downgrades docker-ce=5:19.03.5~3-0~ubuntu-bionic docker-ce-cli containerd.io 
sudo apt-get install -y --allow-downgrades firefox=59.0.2+build1-0ubuntu1
sudo usermod -aG docker $USER
#restart
distribution=$(. /etc/os-release;echo $ID$VERSION_ID)
curl -s -L https://nvidia.github.io/nvidia-docker/gpgkey | sudo apt-key add -
curl -s -L https://nvidia.github.io/nvidia-docker/$distribution/nvidia-docker.list | sudo tee /etc/apt/sources.list.d/nvidia-docker.list

sudo apt-get update -y && sudo apt-get install -y nvidia-container-toolkit
sudo systemctl restart docker
docker pull tensorflow/serving:latest-gpu

sudo apt install firefox=59.0.2+build1-0ubuntu1
sudo apt remove unattended-upgrades
##pip
virtualenv ~/Code/ARMGvenv -p python3 --no-site-packages
. a
pip install numpy==1.18.1 Cython==0.29.14
pip install -r requirements.txt
pip uninstall -y opencv-python-headless opencv-python tensorflow tensorflow-gpu
pip install tensorflow-gpu==1.14.0
pip install jupyter
rm ~/Code/ARMGvenv/lib/python*/no-global-site-packages.txt
mv ~/Code/dnn/dnn.so ~/Code	/dnn/dnn2.so
pip install armgws/*whl
